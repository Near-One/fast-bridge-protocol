import {initContract, login, logout, deposit, withdraw, lock, lp_unlock} from './src/spectre-bridge-client.js'


// `nearInitPromise` gets called on page load
window.nearInitPromise = initContract()
    .then(flow)
    .catch(console.error)

// Log in and log out users using NEAR Wallet
document.querySelector('.sign-in .btn').onclick = login;
document.querySelector('.sign-out .btn').onclick = logout;
document.querySelector('.deposit .btn').onclick = function () {
    deposit("token.spectrebridge2.testnet", 20);
}
document.querySelector('.withdraw .btn').onclick = function () {
    withdraw(1);
}
document.querySelector('.lock .btn').onclick = function () {
    var msg = "{\"valid_till\":1653554604,\"transfer\":{\"token\":\"token_near\",\"amount\":50},\"fee\":{\"token\":\"token2_near\",\"amount\":50},\"recipient\":\"71C7656EC7ab88b098defB751B7401B5f6d8976F\"}";
    lock(msg);
}
document.querySelector('.lp-unlock .btn').onclick = function () {
    var proof = {
        log_index: 2,
        log_entry_data: [248, 121, 148, 92, 115, 158, 64, 57, 213, 82, 226, 219, 249, 76, 233, 231, 219, 38, 28, 136, 188, 236, 132, 225, 160, 115, 149, 66, 46, 24, 42, 27, 19, 253, 156, 217, 181, 179, 100, 207, 74, 221, 152, 184, 239, 54, 179, 27, 65, 247, 86, 48, 204, 30, 72, 80, 166, 184, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 15, 152, 222, 209, 145, 189, 147, 103, 150, 82, 210, 200, 246, 44, 83, 86, 178, 17, 93, 7, 133, 149, 66, 115, 233, 5, 33, 219, 228, 200, 81, 169],
        receipt_index: 46,
        receipt_data: [2, 249, 2, 192, 1, 131, 144, 103, 71, 185, 1, 0, 0, 0, 0, 0, 128, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 8, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 4, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 249, 1, 181, 248, 155, 148, 178, 215, 92, 90, 20, 42, 104, 189, 164, 56, 230, 163, 24, 199, 251, 178, 36, 47, 150, 147, 248, 99, 160, 140, 91, 225, 229, 235, 236, 125, 91, 209, 79, 113, 66, 125, 30, 132, 243, 221, 3, 20, 192, 247, 178, 41, 30, 91, 32, 10, 200, 199, 195, 185, 37, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 92, 115, 158, 64, 57, 213, 82, 226, 219, 249, 76, 233, 231, 219, 38, 28, 136, 188, 236, 132, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 152, 114, 248, 155, 148, 178, 215, 92, 90, 20, 42, 104, 189, 164, 56, 230, 163, 24, 199, 251, 178, 36, 47, 150, 147, 248, 99, 160, 221, 242, 82, 173, 27, 226, 200, 155, 105, 194, 176, 104, 252, 55, 141, 170, 149, 43, 167, 241, 99, 196, 161, 22, 40, 245, 90, 77, 245, 35, 179, 239, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 81, 89, 158, 199, 121, 197, 253, 107, 89, 197, 172, 198, 163, 29, 142, 23, 77, 138, 121, 62, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 174, 248, 121, 148, 92, 115, 158, 64, 57, 213, 82, 226, 219, 249, 76, 233, 231, 219, 38, 28, 136, 188, 236, 132, 225, 160, 115, 149, 66, 46, 24, 42, 27, 19, 253, 156, 217, 181, 179, 100, 207, 74, 221, 152, 184, 239, 54, 179, 27, 65, 247, 86, 48, 204, 30, 72, 80, 166, 184, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 15, 152, 222, 209, 145, 189, 147, 103, 150, 82, 210, 200, 246, 44, 83, 86, 178, 17, 93, 7, 133, 149, 66, 115, 233, 5, 33, 219, 228, 200, 81, 169],
        header_data: [249, 2, 94, 160, 189, 54, 251, 231, 129, 213, 151, 78, 183, 78, 242, 59, 41, 197, 87, 106, 48, 253, 61, 160, 222, 175, 41, 200, 20, 67, 161, 75, 134, 121, 212, 118, 160, 29, 204, 77, 232, 222, 199, 93, 122, 171, 133, 181, 103, 182, 204, 212, 26, 211, 18, 69, 27, 148, 138, 116, 19, 240, 161, 66, 253, 64, 212, 147, 71, 148, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 160, 227, 118, 178, 30, 36, 238, 215, 156, 21, 197, 255, 54, 186, 70, 165, 131, 133, 3, 24, 200, 198, 47, 237, 255, 173, 231, 209, 16, 188, 233, 45, 44, 160, 154, 115, 179, 170, 132, 240, 146, 83, 226, 27, 37, 204, 96, 61, 174, 240, 96, 86, 139, 63, 246, 121, 193, 241, 103, 20, 247, 37, 195, 34, 129, 209, 160, 121, 169, 172, 187, 103, 130, 141, 200, 47, 36, 153, 110, 161, 179, 54, 236, 229, 22, 169, 190, 251, 8, 126, 112, 161, 207, 169, 85, 113, 181, 158, 100, 185, 1, 0, 133, 128, 64, 0, 129, 0, 3, 22, 1, 1, 72, 64, 4, 4, 72, 64, 0, 32, 160, 10, 64, 129, 65, 128, 2, 0, 1, 0, 130, 0, 8, 36, 0, 192, 0, 72, 144, 6, 0, 128, 2, 128, 67, 16, 0, 0, 8, 0, 64, 0, 0, 32, 2, 82, 0, 0, 0, 16, 32, 97, 0, 38, 28, 64, 1, 48, 41, 8, 16, 193, 132, 64, 6, 8, 0, 24, 2, 40, 32, 1, 0, 0, 0, 3, 1, 4, 0, 0, 0, 0, 6, 2, 18, 8, 0, 0, 8, 7, 144, 17, 2, 40, 2, 132, 0, 8, 41, 160, 0, 204, 8, 0, 1, 66, 16, 20, 0, 64, 64, 32, 4, 3, 16, 16, 72, 66, 0, 8, 128, 0, 0, 66, 2, 1, 82, 0, 0, 1, 0, 4, 0, 4, 3, 128, 4, 67, 4, 153, 2, 152, 0, 162, 0, 28, 16, 0, 0, 1, 1, 0, 2, 11, 18, 0, 16, 8, 16, 88, 8, 33, 1, 32, 2, 8, 0, 128, 160, 16, 145, 48, 32, 184, 32, 136, 65, 160, 16, 0, 196, 0, 72, 5, 192, 0, 72, 2, 0, 4, 0, 64, 0, 0, 0, 0, 0, 17, 0, 0, 8, 128, 0, 0, 132, 32, 2, 136, 0, 34, 0, 0, 0, 0, 240, 2, 140, 16, 0, 0, 129, 0, 64, 64, 128, 4, 0, 17, 0, 80, 80, 0, 2, 16, 2, 0, 8, 136, 4, 0, 132, 64, 33, 0, 0, 64, 32, 20, 1, 131, 104, 69, 157, 132, 1, 201, 195, 100, 131, 146, 158, 176, 132, 98, 115, 121, 228, 184, 97, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 147, 140, 196, 72, 159, 58, 198, 13, 47, 210, 227, 198, 94, 161, 197, 39, 54, 71, 168, 214, 236, 131, 249, 162, 90, 66, 73, 47, 105, 79, 99, 244, 32, 247, 182, 176, 55, 106, 156, 180, 215, 41, 3, 135, 53, 109, 137, 180, 66, 195, 47, 233, 82, 44, 189, 23, 183, 47, 148, 86, 225, 125, 201, 8, 1, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 136, 0, 0, 0, 0, 0, 0, 0, 0, 7],
        proof: [[248, 145, 160, 31, 12, 32, 182, 106, 74, 163, 119, 135, 243, 241, 22, 211, 99, 235, 147, 247, 52, 173, 133, 183, 84, 153, 75, 84, 210, 225, 19, 30, 245, 154, 174, 160, 243, 109, 173, 64, 96, 97, 42, 41, 11, 15, 203, 184, 157, 239, 94, 236, 121, 208, 230, 138, 102, 198, 165, 12, 34, 216, 214, 30, 128, 116, 0, 16, 160, 68, 237, 176, 185, 139, 110, 35, 234, 44, 200, 15, 6, 77, 152, 229, 119, 23, 162, 184, 226, 93, 131, 247, 172, 157, 131, 232, 23, 177, 33, 17, 32, 128, 128, 128, 128, 128, 160, 145, 167, 153, 44, 186, 136, 132, 2, 223, 126, 138, 179, 204, 57, 155, 168, 68, 225, 47, 105, 195, 185, 188, 33, 200, 100, 19, 143, 176, 199, 86, 114, 128, 128, 128, 128, 128, 128, 128, 128],
            [249, 2, 17, 160, 79, 188, 0, 73, 197, 92, 69, 225, 75, 12, 69, 35, 183, 148, 157, 247, 191, 26, 206, 18, 190, 50, 195, 9, 162, 243, 104, 186, 14, 52, 21, 64, 160, 8, 134, 118, 132, 100, 63, 7, 118, 179, 106, 214, 62, 191, 224, 61, 95, 200, 152, 178, 34, 31, 155, 76, 180, 85, 187, 231, 149, 191, 39, 28, 236, 160, 41, 124, 20, 249, 214, 210, 112, 72, 191, 111, 175, 250, 5, 70, 216, 225, 217, 75, 114, 14, 154, 79, 16, 180, 249, 8, 190, 244, 100, 204, 159, 123, 160, 207, 223, 194, 187, 184, 166, 254, 121, 11, 103, 52, 66, 12, 142, 115, 214, 128, 32, 238, 208, 14, 108, 22, 240, 240, 68, 95, 106, 68, 29, 27, 219, 160, 185, 237, 73, 170, 231, 224, 86, 255, 40, 27, 62, 221, 153, 41, 238, 242, 111, 136, 163, 149, 88, 13, 253, 187, 27, 175, 246, 140, 145, 173, 168, 23, 160, 4, 8, 10, 30, 145, 44, 138, 57, 87, 91, 183, 121, 89, 63, 49, 53, 178, 71, 111, 99, 178, 28, 241, 8, 82, 133, 68, 190, 58, 53, 254, 182, 160, 1, 173, 53, 112, 60, 217, 114, 169, 47, 48, 2, 87, 215, 221, 8, 82, 8, 149, 5, 191, 231, 176, 249, 215, 5, 12, 218, 206, 213, 132, 40, 15, 160, 102, 23, 177, 172, 149, 129, 166, 184, 237, 164, 94, 197, 232, 110, 135, 246, 193, 144, 175, 20, 196, 178, 30, 110, 198, 128, 54, 189, 91, 51, 135, 89, 160, 3, 196, 47, 67, 135, 235, 198, 11, 54, 100, 48, 218, 223, 180, 217, 224, 74, 228, 240, 163, 56, 79, 228, 109, 15, 188, 45, 202, 226, 176, 240, 110, 160, 9, 248, 116, 192, 92, 32, 242, 117, 86, 151, 26, 52, 209, 221, 58, 207, 67, 28, 208, 4, 216, 35, 141, 67, 26, 11, 125, 240, 133, 240, 174, 195, 160, 20, 221, 54, 243, 64, 56, 1, 100, 103, 161, 209, 80, 176, 60, 173, 140, 100, 195, 228, 251, 240, 164, 231, 190, 181, 128, 183, 160, 134, 131, 110, 138, 160, 179, 181, 187, 199, 250, 40, 239, 7, 34, 185, 35, 184, 238, 8, 73, 52, 141, 224, 92, 55, 122, 92, 251, 5, 156, 101, 39, 53, 62, 27, 67, 97, 160, 183, 216, 105, 231, 51, 52, 49, 246, 138, 121, 85, 187, 230, 87, 187, 82, 45, 158, 130, 119, 49, 255, 224, 44, 174, 237, 34, 4, 230, 218, 88, 246, 160, 200, 102, 14, 80, 166, 71, 158, 36, 227, 93, 203, 209, 61, 20, 32, 81, 22, 209, 190, 210, 114, 9, 12, 191, 57, 18, 54, 17, 166, 226, 4, 229, 160, 207, 40, 13, 254, 152, 150, 100, 185, 33, 206, 93, 235, 133, 8, 233, 90, 127, 185, 118, 122, 81, 100, 222, 80, 14, 220, 149, 230, 76, 74, 72, 125, 160, 225, 246, 68, 222, 156, 102, 121, 150, 4, 189, 248, 93, 86, 80, 54, 64, 166, 24, 243, 224, 55, 154, 160, 162, 43, 240, 219, 101, 245, 236, 174, 145, 128],
            [249, 2, 200, 32, 185, 2, 196, 2, 249, 2, 192, 1, 131, 144, 103, 71, 185, 1, 0, 0, 0, 0, 0, 128, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 8, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 0, 4, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 249, 1, 181, 248, 155, 148, 178, 215, 92, 90, 20, 42, 104, 189, 164, 56, 230, 163, 24, 199, 251, 178, 36, 47, 150, 147, 248, 99, 160, 140, 91, 225, 229, 235, 236, 125, 91, 209, 79, 113, 66, 125, 30, 132, 243, 221, 3, 20, 192, 247, 178, 41, 30, 91, 32, 10, 200, 199, 195, 185, 37, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 92, 115, 158, 64, 57, 213, 82, 226, 219, 249, 76, 233, 231, 219, 38, 28, 136, 188, 236, 132, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 152, 114, 248, 155, 148, 178, 215, 92, 90, 20, 42, 104, 189, 164, 56, 230, 163, 24, 199, 251, 178, 36, 47, 150, 147, 248, 99, 160, 221, 242, 82, 173, 27, 226, 200, 155, 105, 194, 176, 104, 252, 55, 141, 170, 149, 43, 167, 241, 99, 196, 161, 22, 40, 245, 90, 77, 245, 35, 179, 239, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 81, 89, 158, 199, 121, 197, 253, 107, 89, 197, 172, 198, 163, 29, 142, 23, 77, 138, 121, 62, 160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 174, 248, 121, 148, 92, 115, 158, 64, 57, 213, 82, 226, 219, 249, 76, 233, 231, 219, 38, 28, 136, 188, 236, 132, 225, 160, 115, 149, 66, 46, 24, 42, 27, 19, 253, 156, 217, 181, 179, 100, 207, 74, 221, 152, 184, 239, 54, 179, 27, 65, 247, 86, 48, 204, 30, 72, 80, 166, 184, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 35, 224, 250, 58, 254, 119, 175, 245, 220, 108, 106, 0, 126, 58, 16, 193, 69, 6, 51, 15, 152, 222, 209, 145, 189, 147, 103, 150, 82, 210, 200, 246, 44, 83, 86, 178, 17, 93, 7, 133, 149, 66, 115, 233, 5, 33, 219, 228, 200, 81, 169]]
    }
    lp_unlock(1, proof);
}

function flow() {
    console.log("Contract initialize");
}




